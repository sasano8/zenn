# PyCharm　＋　docker環境上で快適な開発をしたい


# 対象読者
- Pycharm利用ユーザー（VS Codeの方がdockerの扱いは多分優れているようです。それでもPyCharmを使いたい方が対象です。）
- Dockerに関する教養がある程度ある方
- PythonのWEB Frameworkを用いた開発に関する教養がある程度ある方
- Pycharm + dockerでアプリケーションを開発したい方（ライブラリ開発は、仮想環境を使用した方がシンプルでオススメです）

# 筆者開発環境
筆者の開発環境は以下の通りです。（Windows Mac等の動作は検証していません。）

- ubuntu 20.04
- PyCharm x.x.x
- fastapi
- pytest

# 解決したい問題
PyCharmでは、dockerを利用した開発をサポートしていますが、以下のような不憫な点がいくつかあります。

- docker環境上に追加されたpackageを自動認識できない（dockerイメージの再ビルドが必要。VS Codeでは再ビルドは必要ないようです。）
- docker環境上でファイルを追加すると、ホスト上と異なるユーザーでファイルが作成され、ホスト上で権限が欠落する
- デバッグやpytest実行時に、pycharmがdockerイメージを再起動するため、起動時間がストレスになる

本記事では、上記のような不憫な点を解決できるように努めています。
データベース等の依存するコンテナがない場合は、仮想環境を用いた方がシンプルな開発環境が構築できます。

# 解決できなかった問題
結局、以下は解決できませんでした。

- docker環境上に追加されたpackageを自動認識できない（面倒ですが、dockerイメージを再ビルドしてください）

# 手順
- dockerイメージ作成・権限設定
- プロジェクトインタープリタの設定
- プロジェクトとdocker環境上のファイル同期
- サンプルアプリケーションの作成
- ホットリロードでサンプルアプリケーションを起動
- ブレークポイントの利用
- pytestの実行


