# OAuth2
RFF6750に登録されている認証スキームである。
OAuthは、認可サーバがクライアントに対し発行するアクセストークン（アクセス認可の文字列）を用いることで、保護リソースへのアクセスを許可する。アクセストークンは、リソース所有者の直接的なクレデンシャルを共有するものではない。

- [英語](https://tools.ietf.org/html/rfc6750)
- [日本語](http://openid-foundation-japan.github.io/rfc6750.ja.html)

## キーワード
- access token
- 認証
- 認可
- Bearer token
- jwt
- token68

# 認証
サービス利用者は、リソースオーナーにIDやパスワードを伝え、リソースオーナーはIDやパスワードなどから利用者を特定する。

# 認可
リソースオーナーは認証の結果として、サービスの利用許可とアクセス可能なリソース範囲を示すトークンを返す。
認証・認可とは、いわゆるログインのことである。

# access token
認可サーバが発行するアクセス認可の文字列。
入館証のようなものだ。

# 署名なしトークン(Bearer Token)
トークンを所有する任意のパーティ（Bearer=持参人払い）は、「トークンを所有している」という条件を満たせばトークンを利用することができる。
電車の切符のように、買った本人でなくとも利用することができる。

```
headers={"X-Token": secret_token}
```

# 現在のログイン処理
1. クライアントから、ユーザ名・パスワードを受け取り、ユーザー情報を取得する。（パスワードは、パスワードハッシュを用いる）
2. ユーザー名・アクセススコープ・有効期限情報を付与した情報をエンコードし、アクセストークンとして返す。
3. クライアントからリソースへのアクセスを要求された時、アクセストークンからユーザー名・アクセススコープをデコードし、権限に応じて処理を受け入れる。

# 疑問
- アクセストークン用のキー・バリューストア（アクセストークン・ユーザーIDのペア）は必要ないのか？
- 可能性として無視できるレベルだが、意図と異なるユーザー情報が埋め込まれた同一のハッシュを生成できる可能性がある。
